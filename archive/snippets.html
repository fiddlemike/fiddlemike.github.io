  <a href="/essay" target="_blank" class="btn btn-primary btn-lg active" role="button" aria-pressed="true">Essay</a>
  <label for="yearSelector">Incident Year</label>
  <select name="yearSelector" id="yearSelector">
    <option value="All">All</option>
    <option value="2013">2013</option>
    <option value="2014">2014</option>
    <option value="2015">2015</option>
    <option value="2016">2016</option>
    <option value="2017">2017</option>
    <option value="2018">2018</option>
  </select>


  // filter by year. Default to 2013
  var data = csv_data.filter(function(d) {
    return d.year == '2013';
  });
  /* Sort from lowest to highest  */
  data.sort(function(a, b) {
    return b.freq - a.freq;
  });


  // Load external data and boot
  d3.queue()
      .defer(d3.json, "http://enjalot.github.io/wwsd/data/world/world-110m.geojson")
      .defer(d3.csv, "mooc-countries.csv", function(d) { data.set(d.code, +d.total); })
      .await(ready);

  function ready(error, topo) {
      if (error) throw error;


      // load and display the incident locations
      d3.csv("data/incidents_by_location_and_type.csv", function(d) {
        return {
          incident_id: d.incident_id,
          year: d.year,
          lat: +d.latitude,
          lon: +d.longitude,
          type: d.incident_characteristics
        };
      }, function(error, data) {
